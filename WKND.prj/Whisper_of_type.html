<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Whisper of Type — Masterpiece Edition</title>
<style>
  :root{
    --bg1:#050513; --bg2:#000; --glass:rgba(255,255,255,0.08); --glass-strong:rgba(255,255,255,0.15);
  }
  html, body { margin:0; padding:0; height:100%; overflow:hidden; background: radial-gradient(1200px 1200px at 50% 40%, var(--bg1), var(--bg2)); color:#fff; font-family: 'Inter Tight', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }

  .logo-ball{
    position: fixed; top:18px; left:18px; width:22px; height:22px; border-radius:50%;
    background: radial-gradient(circle at 35% 35%, #fff, #7eb3ff 40%, #5a7aff22 70%, transparent 80%);
    box-shadow: 0 0 18px #8ecaff, 0 0 40px #5a7aff88, 0 0 80px #3a53ff55;
    animation: float 6s ease-in-out infinite, pulse 3s ease-in-out infinite;
    z-index: 20;
  }
  @keyframes float{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(4px) } }
  @keyframes pulse{ 0%,100%{ box-shadow: 0 0 12px #7aa7ff, 0 0 32px #3e74ff66, 0 0 72px #2d47ff33; } 50%{ box-shadow: 0 0 22px #a6c3ff, 0 0 48px #6b94ff88, 0 0 120px #4f6dff55; } }

  .panel{ position: fixed; top:22px; right:22px; z-index: 15; background: var(--glass); border: 1px solid #ffffff1a; border-radius: 14px; padding: 16px; backdrop-filter: blur(12px); box-shadow: inset 0 1px 0 #ffffff22, 0 10px 30px #0007; width: min(420px, 36vw); color:#fff; }
  .panel-row{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
  .panel label{ font-size:12px; letter-spacing: .08em; text-transform: uppercase; opacity:.9; }
  select, textarea{ width:100%; color:#fff; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.25); border-radius: 10px; outline: none; padding: 10px 12px; font-size: 15px; resize: vertical; }
  select:focus, textarea:focus{ border-color:#7aa7ff; box-shadow: 0 0 0 3px #7aa7ff33; }
  textarea{ height: 96px; line-height: 1.4; }
  option{ background:#0a0a1a; color:white; }
  .hint{ font-size: 11px; opacity:.7; margin-top:6px; line-height:1.3; }

  canvas{ position: absolute; inset:0; display:block; z-index: 0; }
</style>
</head>
<body>
<div class="logo-ball" aria-hidden="true"></div>

<div class="panel">
  <div class="panel-row">
    <label for="styleSelect">Style</label>
    <select id="styleSelect" title="Interactive style">
      <option value="breath">01 — Breath (Stardust)</option>
      <option value="ribbon">02 — Silk Ribbons</option>
      <option value="prism">03 — Prism Projection (3D Light)</option>
      <option value="wind">04 — Wind Field</option>
      <option value="orbit">05 — Orbitals Halo</option>
      <option value="shatter">06 — Shatter & Reform</option>
    </select>
  </div>
  <div class="panel-row" style="flex-direction:column; align-items:stretch;">
    <label for="textInput">Text</label>
    <textarea id="textInput" placeholder="Type multiple lines…\nExample:\nWE ARE\nMADE OF\nLIGHT"></textarea>
    <div class="hint">Each line forms a layer. Move your cursor to bend or scatter the projection. Hold click to push harder.</div>
  </div>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
let particles = [];
let mouse = { x: W/2, y: H/2, down:false };
let idle = 0;
let currentText = '';
let style = 'breath';

const styleSelect = document.getElementById('styleSelect');
const textInput = document.getElementById('textInput');
styleSelect.addEventListener('change', e=> style = e.target.value);
textInput.addEventListener('input', e=> { currentText = e.target.value; buildParticles(currentText); idle = 0; });

window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; if(currentText) buildParticles(currentText); });
window.addEventListener('mousemove', e=>{ mouse.x = e.clientX; mouse.y = e.clientY; idle = 0; });
window.addEventListener('mousedown', ()=> mouse.down=true);
window.addEventListener('mouseup', ()=> mouse.down=false);

function buildParticles(text){
  particles = [];
  if(!text) return;
  const lines = text.split(/\r?\n/).filter(l=>l.trim().length>0);
  const temp = document.createElement('canvas');
  const tctx = temp.getContext('2d');
  temp.width = W; temp.height = H;
  const base = Math.min(220, Math.max(48, Math.floor((H * 0.7) / Math.max(1, lines.length))));
  tctx.textAlign = 'center';
  tctx.textBaseline = 'middle';
  tctx.fillStyle = '#fff';
  const lineGap = Math.max(10, base * 0.28);
  const totalHeight = base * lines.length + lineGap * (lines.length - 1);
  const startY = H/2 - totalHeight/2 + base/2;

  const gap = 6;
  lines.forEach((line, i)=>{
    let fontSize = base; tctx.font = `900 ${fontSize}px 'Inter Tight', sans-serif`;
    while (tctx.measureText(line).width > W*0.8 && fontSize > 24){ fontSize -= 2; tctx.font = `900 ${fontSize}px 'Inter Tight', sans-serif`; }
    const y = startY + i*(fontSize + lineGap);
    tctx.fillText(line, W/2, y);
  });

  const data = tctx.getImageData(0,0,W,H).data;
  for(let y=0;y<H;y+=gap){
    for(let x=0;x<W;x+=gap){
      const idx = (y*W + x)*4;
      if(data[idx+3] > 120){
        particles.push({
          x: Math.random()*W, y: Math.random()*H, z: Math.random()*100-50,
          ox: x, oy: y, oz: 0,
          vx:0, vy:0, vz:0,
          a: Math.random()*Math.PI*2, r: 6+Math.random()*14, s: 1.6+Math.random()*1.4, life: Math.random()*1000
        });
      }
    }
  }
}

function animate(){
  ctx.fillStyle = 'rgba(5,5,16,0.2)'; ctx.fillRect(0,0,W,H);
  ctx.globalCompositeOperation = 'source-over';

  for(const p of particles){
    let dx = p.ox - p.x, dy = p.oy - p.y, dz = p.oz - p.z;
    p.vx += dx * 0.03; p.vy += dy * 0.03; p.vz += dz * 0.03;
    const mdx = mouse.x - p.x, mdy = mouse.y - p.y; const d = Math.hypot(mdx,mdy)+0.01; let repel = Math.min(180/d,4); if(mouse.down) repel *= 2;
    p.vx -= mdx * repel * 0.015; p.vy -= mdy * repel * 0.015;

    switch(style){
      case 'breath': if(idle>240){ p.vx += Math.sin((p.oy + Date.now()*0.001))*0.1; p.vy += Math.cos((p.ox + Date.now()*0.0011))*0.1; } break;
      case 'ribbon': {
        // Create elegant trailing connections
        const t = Date.now()*0.001;
        p.vx += Math.sin(p.y*0.02 + t)*0.1;
        p.vy += Math.cos(p.x*0.02 + t)*0.1;
        break;
      }
      case 'prism': {
        const t = Date.now()*0.001;
        const angleX = Math.sin(t)*0.4, angleY = Math.cos(t*0.6)*0.3;
        const sinX = Math.sin(angleX), cosX = Math.cos(angleX);
        const sinY = Math.sin(angleY), cosY = Math.cos(angleY);
        let rx = p.ox*cosY - p.oz*sinY;
        let rz = p.ox*sinY + p.oz*cosY;
        let ry = p.oy*cosX - rz*sinX;
        p.oz = rz*cosX + p.oy*sinX;
        p.ox = rx; p.oy = ry;
        p.vx += Math.sin(t+p.y*0.01)*0.2;
        p.vy += Math.cos(t+p.x*0.01)*0.2;
        break;
      }
      case 'wind': {
        // Wind gusts sweeping effect using noise-like waves
        const t = Date.now()*0.0003;
        const gust = Math.sin((p.x + t*300)*0.005) * Math.cos((p.y + t*500)*0.005);
        p.vx += gust * 2.5;
        p.vy += Math.sin(gust * Math.PI) * 1.5;
        break;
      }
      case 'orbit': p.a += 0.03 + (p.r*0.001); p.vx += Math.cos(p.a)*0.9; p.vy += Math.sin(p.a)*0.9; break;
      case 'shatter': if((p.life % 260|0)===0){ const ang=Math.random()*Math.PI*2, pow=6+Math.random()*8; p.vx+=Math.cos(ang)*pow; p.vy+=Math.sin(ang)*pow; } p.life++; break;
    }

    p.x += p.vx*0.05; p.y += p.vy*0.05; p.z += p.vz*0.05;
    p.vx *= 0.9; p.vy *= 0.9; p.vz *= 0.9;

    const glow = 0.6 + 0.4*Math.sin((p.x+p.y+Date.now()*0.002)*0.8);
    const size = p.s * (1 + p.z*0.005);

    if(style==='prism'){
      const hue = (p.x + p.y + Date.now()*0.1) % 360;
      ctx.fillStyle = `hsla(${hue},100%,70%,${glow})`;
      ctx.shadowColor = `hsla(${hue},100%,70%,0.6)`;
      ctx.shadowBlur = 12;
    } else if(style==='ribbon'){
      ctx.fillStyle = `rgba(255,255,255,${glow})`;
      ctx.shadowColor = '#ffffffaa'; ctx.shadowBlur = 10;
    } else if(style==='wind'){
      ctx.fillStyle = `rgba(150,200,255,${0.4+Math.sin(Date.now()*0.002)*0.3})`;
      ctx.shadowColor = '#7aa7ff'; ctx.shadowBlur = 20;
    } else {
      ctx.fillStyle = `rgba(255,255,255,${glow})`;
      ctx.shadowColor = '#ffffffaa'; ctx.shadowBlur = 8;
    }

    ctx.beginPath(); ctx.arc(p.x, p.y, size, 0, Math.PI*2); ctx.fill(); ctx.shadowBlur = 0;
  }

  if(style==='ribbon'){
    ctx.lineWidth = 0.6; ctx.strokeStyle = 'rgba(255,255,255,0.2)';
    for(let i=0;i<particles.length;i+=5){
      const a = particles[i];
      const b = particles[(i+10)%particles.length];
      ctx.beginPath();
      ctx.moveTo(a.x,a.y);
      ctx.quadraticCurveTo((a.x+b.x)/2+Math.sin(Date.now()*0.001)*5, (a.y+b.y)/2+Math.cos(Date.now()*0.001)*5, b.x,b.y);
      ctx.stroke();
    }
  }

  idle++;
  requestAnimationFrame(animate);
}

currentText = 'WE ARE\nMADE OF\nLIGHT';
textInput.value = currentText;
buildParticles(currentText);
animate();
</script>
</body>
</html>
