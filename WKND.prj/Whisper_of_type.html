<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Whisper of Type — p5.js Edition</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
  <style>
    :root {
      --bg1: #050513;
      --bg2: #000;
      --glass: rgba(255, 255, 255, 0.08);
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: radial-gradient(1200px 1200px at 50% 40%, var(--bg1), var(--bg2));
      color: #fff;
      font-family: 'Inter Tight', system-ui, sans-serif;
    }
    .logo-ball {
      position: fixed;
      top: 18px;
      left: 18px;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, #fff, #7eb3ff 40%, #5a7aff22 70%, transparent 80%);
      box-shadow: 0 0 18px #8ecaff, 0 0 40px #5a7aff88, 0 0 80px #3a53ff55;
      animation: float 6s ease-in-out infinite, pulse 3s ease-in-out infinite;
      z-index: 20;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }
    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 0 12px #7aa7ff, 0 0 32px #3e74ff66, 0 0 72px #2d47ff33;
      }
      50% {
        box-shadow: 0 0 22px #a6c3ff, 0 0 48px #6b94ff88, 0 0 120px #4f6dff55;
      }
    }
    .panel {
      position: fixed;
      top: 22px;
      right: 22px;
      z-index: 15;
      background: var(--glass);
      border: 1px solid #ffffff1a;
      border-radius: 14px;
      padding: 16px;
      backdrop-filter: blur(12px);
      box-shadow: inset 0 1px 0 #ffffff22, 0 10px 30px #0007;
      width: min(420px, 36vw);
      color: #fff;
    }
    .panel-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 12px;
    }
    .panel label {
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      opacity: 0.9;
    }
    select, textarea {
      width: 100%;
      color: #fff;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 10px;
      outline: none;
      padding: 10px 12px;
      font-size: 15px;
      resize: vertical;
    }
    select:focus, textarea:focus {
      border-color: #7aa7ff;
      box-shadow: 0 0 0 3px #7aa7ff33;
    }
    textarea {
      height: 96px;
      line-height: 1.4;
    }
    option {
      background: #0a0a1a;
      color: white;
    }
    .hint {
      font-size: 11px;
      opacity: 0.7;
      margin-top: 6px;
      line-height: 1.3;
    }
  </style>
</head>
<body>
  <div class="logo-ball" aria-hidden="true"></div>
  <div class="panel">
    <div class="panel-row">
      <label for="styleSelect">Style</label>
      <select id="styleSelect" title="Interactive style">
        <option value="breath">01 — Breath (Stardust)</option>
        <option value="ribbon">02 — Silk Ribbons</option>
        <option value="prism">03 — Prism Projection (3D Light)</option>
        <option value="wind">04 — Wind Field</option>
        <option value="orbit">05 — Orbitals Halo</option>
        <option value="shatter">06 — Shatter & Reform</option>
      </select>
    </div>
    <div class="panel-row" style="flex-direction:column; align-items:stretch;">
      <label for="textInput">Text</label>
      <textarea id="textInput" placeholder="Type multiple lines…\nExample:\nWE ARE\nMADE OF\nLIGHT"></textarea>
      <div class="hint">Each line forms a layer. Move your cursor to bend or scatter the projection. Hold click to push harder.</div>
    </div>
  </div>

  <script>
    let particles = [];
    let style = 'breath';
    let textInput, styleSelect;

    function setup() {
      createCanvas(windowWidth, windowHeight);
      noStroke();
      textAlign(CENTER, CENTER);
      fill(255);
      textFont('Inter Tight');
      textSize(128);
      buildParticles('WE ARE\nMADE OF\nLIGHT');

      textInput = document.getElementById('textInput');
      styleSelect = document.getElementById('styleSelect');
      textInput.addEventListener('input', () => buildParticles(textInput.value));
      styleSelect.addEventListener('change', e => style = e.target.value);
    }

    function buildParticles(txt) {
      particles = [];
      if (!txt) return;
      let lines = txt.split(/\n/).filter(l => l.trim() !== '');
      let gfx = createGraphics(width, height);
      gfx.textAlign(CENTER, CENTER);
      gfx.fill(255);
      let fs = min(180, width / 8);
      gfx.textSize(fs);
      let gap = 6;
      let totalH = lines.length * fs * 1.2;
      let startY = height / 2 - totalH / 2;

      for (let i = 0; i < lines.length; i++) {
        gfx.text(lines[i], width / 2, startY + i * fs * 1.2);
      }

      gfx.loadPixels();
      for (let y = 0; y < height; y += gap) {
        for (let x = 0; x < width; x += gap) {
          let idx = 4 * (x + y * width);
          if (gfx.pixels[idx + 3] > 128) {
            particles.push({
              x: random(width),
              y: random(height),
              ox: x,
              oy: y,
              vx: 0,
              vy: 0,
              a: random(TWO_PI),
              r: random(10, 30),
              s: random(2, 4)
            });
          }
        }
      }
    }

    function draw() {
      background(5, 5, 16, 50);
      for (let p of particles) {
        let dx = p.ox - p.x;
        let dy = p.oy - p.y;
        p.vx += dx * 0.03;
        p.vy += dy * 0.03;

        if (style === 'breath') {
          p.vx += sin(frameCount * 0.01 + p.y * 0.01) * 0.1;
          p.vy += cos(frameCount * 0.01 + p.x * 0.01) * 0.1;
        } else if (style === 'ribbon') {
          p.vx += sin(p.y * 0.02 + frameCount * 0.02) * 0.2;
          p.vy += cos(p.x * 0.02 + frameCount * 0.02) * 0.2;
        } else if (style === 'prism') {
          let hueVal = (p.x + p.y + frameCount) % 360;
          fill(`hsla(${hueVal},100%,70%,0.9)`);
        } else if (style === 'wind') {
          p.vx += noise(p.x * 0.01, p.y * 0.01, frameCount * 0.005) * 2 - 1;
          p.vy += noise(p.y * 0.01, p.x * 0.01, frameCount * 0.005) * 2 - 1;
        } else if (style === 'orbit') {
          p.a += 0.05;
          p.x += cos(p.a) * 1.5;
          p.y += sin(p.a) * 1.5;
        } else if (style === 'shatter') {
          if (frameCount % 200 === 0) {
            p.vx += random(-5, 5);
            p.vy += random(-5, 5);
          }
        }

        p.vx *= 0.9;
        p.vy *= 0.9;
        p.x += p.vx * 0.1;
        p.y += p.vy * 0.1;

        fill(255, 255, 255, 200);
        ellipse(p.x, p.y, p.s);
      }
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
      buildParticles(textInput.value);
    }
  </script>
</body>
</html>
